分页管理机制：

通过修改系统启动配置文件启动或禁止分页机制。

控制寄存器CR0：
31位 PG 0禁用，1启用
5~30位
4位 ET
3位 TS
2位 EM
1位 MP
0位 PE 0实模式 1保护模式


分段机制：虚拟地址（段和偏移构成的逻辑地址）到线性地址的转换
分页机制：线性地址 到 物理地址转换
80386中，页的大小固定为 4K 字节，每一页的边界地址为4K的倍数。


页码：
分页的开始地址 XXXXX000h，XXXXX即页码，地址的高20位。

线性地址到物理地址的转换：
两级页映射表：
第一级 页目录表，PDT，4K，每项4字节，值为第二级页表所在物理地址空间页的页码；
第二级 页表， PPT， 4K，每项4字节，包含对应的物理空间页的页码

页目录表表项：PDE
页表表项：PTE
统一的页表格式：
BIT32-BIT12 BIT11-BIT9 BIT8 BIT7 BIT6 BIT5 BIT4 BIT3 BIT2 BIT1 Bit0
  物理页码     AVL      0    0    0    A    0    0    U/S  R/W  P


1、CR3高20位保存PDT的物理页码
2、线性地址高10位 为PDT中的索引，即页目录表索引
3、线性地址中10位 为PTT中的索引，即页表索引
4、线性地址低12位 物理内存页的偏移


!pte 查看某地址的页表项和页目录表项
KPROCESS.DirectoryTable[0]记录进程所有页表的位置
进程切换时通过CR3通知硬件

EPROCESS.Pcb 偏移为0 ObReferencedObjectByHandle获得进程EPROCESS
PsGetCurrentProcess也可以获得
!process 查看进程相关信息


注意通过高10位、中10位得到的是页码，要设置后12位为0.




PAE Physical Address Extension 物理地址扩展
CR4寄存器的第5位为1，表示启用物理地址扩展
高2位：页目录指针表索引
9位：页目录表索引
9位：页表索引
12位：业内偏移
